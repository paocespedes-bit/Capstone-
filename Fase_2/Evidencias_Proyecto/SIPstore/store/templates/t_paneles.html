{% load static %}

{% load myfilters %}
<!-- !css -->
{% block link %}
<link rel="stylesheet" href="{% static 'store/style/tarjeta.css' %}" />
<link rel="stylesheet" href="{% static 'css/all.min.css' %}" />
{% endblock %}

<!-- !bloque de contenido -->
{% block content %}
<!-- !Tarjetas de productos -->
{% for panel in paneles %}
{% if panel.inventario.first.modo_stock == 'stock' and panel.inventario.first.disponible > 0  or panel.inventario.first.modo_stock == 'pedido' %}
<div class="contenedor-card" data-url="{% url 'paneles_detail' panel.pk %}">
  <div class="card">
    {% if panel.imagenes.all %}
    <img src="{{panel.imagenes.first.imagen.url  }}" alt="{{panel.nombre}}" />
    {% else %}
    <img src="{% static 'img/SinImagen.png' %}" alt="Imagen no disponible" />
    {% endif %}
    <!-- !Oferta  -->
    <!-- <div class="oferta">-10%</div> -->
    <!-- !--------------------- -->
    <div class="card-body">
      <div class="card-title">{{panel.nombre}}</div>
      <!-- !Estrellas -->
      <!-- <div class="stars">★★★★★</div> -->
      <!-- !--------------------- -->
      <div class="card-description">
        {% if panel.inventario.first.modo_stock == 'pedido' %}
          Disponible bajo pedido
        {% else %}
          Stock Disponible ({{panel.inventario.first.disponible}})
        {% endif %}
      </div>
      <!-- !precios -->
      <div class="prices">
        <p class="price">${{panel.precio|floatformat:0|punto_miles}}</p> 
        <!-- !Precio anterior -->
        <p class="tachado">${{panel.precio|floatformat:0|punto_miles}}</p>
      </div>
      <!-- !--------------------- -->
      <div class="actions">
        <div class="quantity">
          <button type="button" class="btn rounded-circle custom-icon-btn btn-menos"><i class="bi bi-dash-lg"></i></button>
            <span class="cantidad-input" data-max="{% if panel.inventario.first.modo_stock == 'stock' %}{{ panel.inventario.first.disponible }}{% else %}9999{% endif %}">1</span>
          <button type="button" class="btn rounded-circle custom-icon-btn btn-mas"><i class="bi bi-plus-lg"></i></button>
        </div>
        <button class="add-cart add-btn add-btn-ajax" id="add-btn-{{ panel.id }}" data-id="{{ panel.id }}" data-ctid="{{ panel|content_type }}" data-url="{% url 'add_ajax' %}"
        >Añadir al Carrito&nbsp;<i class="bi bi-cart3"></i></button >
      </div>

    </div>
    <div class="expansion">
      <p class="info"><i class="fa-solid fa-ruler-combined"></i>Espesor<br>{{panel.espesor}}</p>
      <p class="info"><i class="fa-solid fa-hammer"></i>Madera de Union<br>{{panel.madera_union}}</p>
      <p class="info"><i class="fa-solid fa-grip-lines-vertical"></i>Tipo OBS<br>{{panel.tipo_obs}}</p>
    </div>
  </div>
</div>
{% endif %}
{% empty %}
<p>No hay paneles disponibles</p>
{% endfor %} 
{% include 'toast.html' %}
{% endblock %}
{% block script %}
<script src="{% static 'store/js/mas_menos.js' %}"></script>
<script src="{% static 'store/js/click.js' %}"></script>
<script src="{% static 'cart/js/carrito.js' %}"></script>
{% endblock %}
